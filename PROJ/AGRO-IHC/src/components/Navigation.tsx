/**
 * Componente de Navegaci√≥n Principal
 * ETAPA 3: DESARROLLO PROTOTIPO - Dise√±o men√∫ con par√°metros de usabilidad
 * ISO 9241-210: Dise√±o centrado en el usuario
 * 
 * Par√°metros de usabilidad implementados:
 * - Navegaci√≥n clara y consistente
 * - Feedback visual al hover y selecci√≥n
 * - Accesibilidad con ARIA labels
 * - Responsive design para dispositivos m√≥viles
 * - Contraste de colores adecuado
 */

import { useState } from 'react';
import type { MenuOption } from '../types';
import './Navigation.css';

interface NavigationProps {
  currentPage: MenuOption;
  onNavigate: (page: MenuOption) => void;
}

export default function Navigation({ currentPage, onNavigate }: NavigationProps) {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

  const menuItems: { key: MenuOption; label: string; icon: string }[] = [
    { key: 'home', label: 'Inicio', icon: 'üè†' },
    { key: 'producers', label: 'Productores', icon: 'üë®‚Äçüåæ' },
    { key: 'fairs', label: 'Ferias', icon: 'üé™' },
    { key: 'registrations', label: 'Inscripciones', icon: 'üìù' },
    { key: 'transport', label: 'Transporte', icon: 'üöö' },
    { key: 'sales', label: 'Ventas', icon: 'üí∞' },
    { key: 'reports', label: 'Reportes', icon: 'üìä' },
  ];

  const handleNavigation = (page: MenuOption) => {
    onNavigate(page);
    setIsMobileMenuOpen(false);
  };

  const toggleMobileMenu = () => {
    setIsMobileMenuOpen(!isMobileMenuOpen);
  };

  return (
    <nav className="navigation" role="navigation" aria-label="Navegaci√≥n principal">
      <div className="nav-container">
        <div className="nav-header">
          <h1 className="nav-logo">
            <span className="logo-icon">üåæ</span>
            AgroFeria
          </h1>
          
          {/* Bot√≥n men√∫ m√≥vil - REQUISITO: Dise√±o responsive */}
          <button
            className={`mobile-menu-toggle ${isMobileMenuOpen ? 'active' : ''}`}
            onClick={toggleMobileMenu}
            aria-label="Abrir men√∫ de navegaci√≥n"
            aria-expanded={isMobileMenuOpen}
          >
            <span className="hamburger-line"></span>
            <span className="hamburger-line"></span>
            <span className="hamburger-line"></span>
          </button>
        </div>

        {/* Men√∫ principal - REQUISITO: Navegaci√≥n clara */}
        <ul className={`nav-menu ${isMobileMenuOpen ? 'mobile-open' : ''}`}>
          {menuItems.map((item) => (
            <li key={item.key} className="nav-item">
              <button
                className={`nav-link ${currentPage === item.key ? 'active' : ''}`}
                onClick={() => handleNavigation(item.key)}
                aria-current={currentPage === item.key ? 'page' : undefined}
                title={item.label}
              >
                <span className="nav-icon" aria-hidden="true">
                  {item.icon}
                </span>
                <span className="nav-label">{item.label}</span>
              </button>
            </li>
          ))}
        </ul>
      </div>
    </nav>
  );
}
